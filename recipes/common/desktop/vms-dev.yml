# Recipe for Virtual Machine support and a few developer tools.
modules:
  - type: dnf
    repos:
      files:
        - https://download.docker.com/linux/fedora/docker-ce.repo
      copr:
        - gmaglione/podman-bootc
    install:
      packages:
        - adb
        - bcc
        - bpftop
        - bpftrace
        - lxc
        - libvirt
        - libvirt-daemon-kvm
        - libvirt-ssh-proxy
        - libvirt-nss
        - qemu-img
        - qemu-kvm
        - edk2-ovmf
        - ublue-os-libvirt-workarounds
        - guestfs-tools
        - ydotool
        - pnpm
        - pipx
        - podman-compose
        - podman-machine
        - podman-tui
        - podman-bootc
        - flatpak-builder
        # docker
        - containerd.io
        - docker-buildx-plugin
        - docker-ce
        - docker-ce-cli
        - docker-compose-plugin
        - docker-model-plugin
  - type: systemd
    system:
      enabled:
        - docker.socket
        - podman.socket
        - ublue-os-libvirt-workarounds.service

  - type: default-flatpaks
    configurations:
      - notify: false # Send notification after install/uninstall is finished (true/false)
      - scope: system
        install:
          - org.virt_manager.virt-manager
